<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>14&nbsp; Explaining Variation in Outcome Variable with Models – Introduction to Business Statistics: A Modeling Approach</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../modules/05-explanatory-power-of-models/accounting-for-variance.html" rel="next">
<link href="../../modules/05-explanatory-power-of-models/explain-as-used-in-statistics.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-985aa47af68dae11cd4d235c71fb941e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6598efebc0fc82f63c3510b9ac47738c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../modules/05-explanatory-power-of-models/05-overview.html">Explanatory Power of a Model</a></li><li class="breadcrumb-item"><a href="../../modules/05-explanatory-power-of-models/variance-analysis.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Explaining Variation in Outcome Variable with Models</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../images/logo-dark.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Introduction to Business Statistics: A Modeling Approach</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Business Statistics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Data, Visualization, and Patterns</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/01-data-visualization/01-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 1: Data, Visualization &amp; Patterns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/01-data-visualization/data-frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Frames and Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/01-data-visualization/point-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Exploring Relationships through Scatterplots</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Variation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/02-variability/02-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 2: Variation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/02-variability/violin-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Using Violin Plots to Visualize Distribution</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/02-variability/variance-and-sd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Variance and standard deviation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction to models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/03-introduction-to-models/03-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 3: Introduction to models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/03-introduction-to-models/path-to-models-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The Simplest Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/03-introduction-to-models/category-means-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Category Means</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/03-introduction-to-models/intro-to-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">What is a model?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/03-introduction-to-models/visualizing-simple-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Visualizing Mean Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">More on models – least squares</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/04-more-on-models/04-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 4: Linear Regression Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/04-more-on-models/line-of-best-fit-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Line of Best Fit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/04-more-on-models/visualizing-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Visualizing Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/04-more-on-models/finding-the-model-function.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Finding the Model Function</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/04-more-on-models/model-with-cat-and-num-explanatories-story.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Amanda’s New Challenge</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Explanatory Power of a Model</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/05-explanatory-power-of-models/05-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 5: Explanatory Power of a Model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/05-explanatory-power-of-models/explain-as-used-in-statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title"><em>Explain</em> as used in Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/05-explanatory-power-of-models/variance-analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Explaining Variation in Outcome Variable with Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../modules/05-explanatory-power-of-models/accounting-for-variance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Variance Equation and <span class="math inline">\(R^2\)</span></span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#model-as-an-explainer-of-variation-in-the-outcome-variable" id="toc-model-as-an-explainer-of-variation-in-the-outcome-variable" class="nav-link active" data-scroll-target="#model-as-an-explainer-of-variation-in-the-outcome-variable"><span class="header-section-number">14.1</span> Model as an explainer of variation in the outcome variable</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../modules/05-explanatory-power-of-models/05-overview.html">Explanatory Power of a Model</a></li><li class="breadcrumb-item"><a href="../../modules/05-explanatory-power-of-models/variance-analysis.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Explaining Variation in Outcome Variable with Models</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-explaining-variation" class="quarto-section-identifier"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Explaining Variation in Outcome Variable with Models</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In the previous chapter, we learned how to compute <strong>model values</strong> and <strong>residuals</strong>. For each day, the model gave us a predicted number of customers, and the residual told us how far off that prediction was from reality.</p>
<p>Amanda asked the interns to come over to the the mall kiosk so that they could get a feel for the actual operation while they discussed how to take this project forward. She seemed a bit concerned.</p>
<p>“You have helped us improve efficiency over the past few months. I have been able to maintain stable staffing levels while not overstaffing on slow days, or under-staffing on busy days.</p>
<p>I have seen that using data properly does indeed help me to make better decisions and am planning to sign up for a service that will give me more data about our operations … but they are pricey and I don’t want to spend the money without knowing how much potential we have to improve our models. I want to know how much room we have to improve. So my first question for you all is:</p>
<blockquote class="blockquote">
<p><em>How good is this model, really? Do we have room to improve? Or have we hit the ceiling?</em></p>
</blockquote>
<p>Well, that was three questions …” Amanda said with a smile. “Why don’t you discuss and we can talk about it after a while?”</p>
<p>The interns are about to discover an important concept in linear models (the kind we build in this course) – <strong>variance of the outcome variable is split between what the model explains and what it does not</strong>.</p>
<section id="model-as-an-explainer-of-variation-in-the-outcome-variable" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="model-as-an-explainer-of-variation-in-the-outcome-variable"><span class="header-section-number">14.1</span> Model as an explainer of variation in the outcome variable</h2>
<p>Steve began “To map back to what we did in our last few months for Amanda, we might say that when look at the outcome variable – the number of customers each day – and see the variability. Initially when Amanda just gave us the number of customers alone, we could not do much and suggested that the best she could do was to use the average as the estimate each day for both kiosks.</p>
<p>Some of the variability in the number of customers arises because of their location. The beach kiosk has its pattern and the mall one has its quirks. For example, on average the beach kiosk saw 40 more customers each day. So using the same staffing level for both kiosks does not make sense.</p>
<p>So, one reason for the variation in the numbers was the kiosk each number was associated with. Once Amanda gave us the kiosk for each number in the data, we were hen able to give her a separate estimate for each kiosk and she confirmed that it improved matters for her.””</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The model that used kiosk as the explanatory variable explained, or clarified, why there was some variability in the number of customers overall, but it did not explain all of the variability. For example, we know that the overall average number of customers was around 120 while the average for the mall was around 100 and for the beach was around 140. So if we look at the sales for a given day and see that it is 150, we can be pretty sure (but not 100% certain) that this sale likely was for the beach kiosk. So, in this sense, the kiosk location “explains” the number of customers.</p>
</div>
</div>
<p>Angela joined in: “But, there is still variability in the sales for each kiosk. That is, not all the numbers for the beach kiosk are the same, no=r are the numbers for the mall kiosk the same. So just knowing the kiosk location did not tell us the whole story. We still had some more variability to explain. We added temperature and that improved matters for Amanda.”</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>We know that the average number of customers for the beach kiosk is close to 140 and that temperature has a role to play in the number of customers.</p>
<p>Let us say in the data we see 150 customers (above average) for a given day at the beach kiosk. WHat does that say about the likely temperature on that day? It would be reasonable to expect that the temperature was also above average on that day – of course we cannot be 100% sure, but that would be a reasonable expectation. In this sense the model with kiosk and temperature as explanatory variables “explains” the number of customers.</p>
</div>
</div>
<p>Igor and Dave almost simultaneously say “What if together the kiosk location and the temperature tell us everything we need to know. What if they explain all the variability in the number of customers?”</p>
<p>Suzie immediately says “That would mean that the model with kiosk location and temperature gives estimates that match actual values <em>exactly</em>! Does it?”</p>
<p>Peter brings up a table showing the original data and the model estimates (tbl-temp-kiosk-model-estimates) using the following code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>  kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">mod_est =</span> <span class="fu">model_values</span>(customers <span class="sc">~</span> temperature <span class="sc">+</span> kiosk))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="caption-top table">
<caption>Kiosk data and model estimates for customers ~ temperature + kiosk (model estimates rounded){#tbl-temp-kiosk-model-estimates}</caption>
<thead>
<tr class="header">
<th style="text-align: left;">day</th>
<th style="text-align: right;">customers</th>
<th style="text-align: left;">kiosk</th>
<th style="text-align: right;">temperature</th>
<th style="text-align: right;">mod_est</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">D01</td>
<td style="text-align: right;">67</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">58.6</td>
<td style="text-align: right;">77</td>
</tr>
<tr class="even">
<td style="text-align: left;">D02</td>
<td style="text-align: right;">119</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">73.6</td>
<td style="text-align: right;">116</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D03</td>
<td style="text-align: right;">93</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">62.3</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="even">
<td style="text-align: left;">D04</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">76.5</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D05</td>
<td style="text-align: right;">130</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">78.2</td>
<td style="text-align: right;">128</td>
</tr>
<tr class="even">
<td style="text-align: left;">D06</td>
<td style="text-align: right;">80</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">51.4</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D07</td>
<td style="text-align: right;">94</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">65.8</td>
<td style="text-align: right;">96</td>
</tr>
<tr class="even">
<td style="text-align: left;">D08</td>
<td style="text-align: right;">124</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">76.8</td>
<td style="text-align: right;">125</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D09</td>
<td style="text-align: right;">108</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">66.5</td>
<td style="text-align: right;">98</td>
</tr>
<tr class="even">
<td style="text-align: left;">D10</td>
<td style="text-align: right;">103</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">63.7</td>
<td style="text-align: right;">91</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D11</td>
<td style="text-align: right;">125</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">78.7</td>
<td style="text-align: right;">130</td>
</tr>
<tr class="even">
<td style="text-align: left;">D12</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">63.6</td>
<td style="text-align: right;">90</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D13</td>
<td style="text-align: right;">103</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">70.3</td>
<td style="text-align: right;">108</td>
</tr>
<tr class="even">
<td style="text-align: left;">D14</td>
<td style="text-align: right;">96</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">67.2</td>
<td style="text-align: right;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D15</td>
<td style="text-align: right;">73</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">53.1</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="even">
<td style="text-align: left;">D16</td>
<td style="text-align: right;">106</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">77.0</td>
<td style="text-align: right;">125</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D17</td>
<td style="text-align: right;">82</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">57.4</td>
<td style="text-align: right;">74</td>
</tr>
<tr class="even">
<td style="text-align: left;">D18</td>
<td style="text-align: right;">60</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">51.3</td>
<td style="text-align: right;">58</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D19</td>
<td style="text-align: right;">113</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">59.8</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="even">
<td style="text-align: left;">D20</td>
<td style="text-align: right;">131</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">78.6</td>
<td style="text-align: right;">129</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D21</td>
<td style="text-align: right;">101</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">76.7</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: left;">D22</td>
<td style="text-align: right;">100</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">70.8</td>
<td style="text-align: right;">109</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D23</td>
<td style="text-align: right;">97</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">69.2</td>
<td style="text-align: right;">105</td>
</tr>
<tr class="even">
<td style="text-align: left;">D24</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">79.8</td>
<td style="text-align: right;">132</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D25</td>
<td style="text-align: right;">102</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">69.7</td>
<td style="text-align: right;">106</td>
</tr>
<tr class="even">
<td style="text-align: left;">D01</td>
<td style="text-align: right;">168</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">71.3</td>
<td style="text-align: right;">167</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D02</td>
<td style="text-align: right;">164</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">66.3</td>
<td style="text-align: right;">154</td>
</tr>
<tr class="even">
<td style="text-align: left;">D03</td>
<td style="text-align: right;">162</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">67.8</td>
<td style="text-align: right;">158</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D04</td>
<td style="text-align: right;">129</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">58.7</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="even">
<td style="text-align: left;">D05</td>
<td style="text-align: right;">106</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.4</td>
<td style="text-align: right;">123</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D06</td>
<td style="text-align: right;">203</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">78.9</td>
<td style="text-align: right;">187</td>
</tr>
<tr class="even">
<td style="text-align: left;">D07</td>
<td style="text-align: right;">187</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">77.1</td>
<td style="text-align: right;">182</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D08</td>
<td style="text-align: right;">154</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">70.7</td>
<td style="text-align: right;">165</td>
</tr>
<tr class="even">
<td style="text-align: left;">D09</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">73.9</td>
<td style="text-align: right;">174</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D10</td>
<td style="text-align: right;">118</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">50.7</td>
<td style="text-align: right;">113</td>
</tr>
<tr class="even">
<td style="text-align: left;">D11</td>
<td style="text-align: right;">146</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">64.3</td>
<td style="text-align: right;">149</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D12</td>
<td style="text-align: right;">191</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">72.8</td>
<td style="text-align: right;">171</td>
</tr>
<tr class="even">
<td style="text-align: left;">D13</td>
<td style="text-align: right;">105</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">56.5</td>
<td style="text-align: right;">128</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D14</td>
<td style="text-align: right;">136</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">59.5</td>
<td style="text-align: right;">136</td>
</tr>
<tr class="even">
<td style="text-align: left;">D15</td>
<td style="text-align: right;">134</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">56.9</td>
<td style="text-align: right;">130</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D16</td>
<td style="text-align: right;">122</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.3</td>
<td style="text-align: right;">123</td>
</tr>
<tr class="even">
<td style="text-align: left;">D17</td>
<td style="text-align: right;">148</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">144</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D18</td>
<td style="text-align: right;">138</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">62.4</td>
<td style="text-align: right;">144</td>
</tr>
<tr class="even">
<td style="text-align: left;">D19</td>
<td style="text-align: right;">131</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">61.1</td>
<td style="text-align: right;">140</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D20</td>
<td style="text-align: right;">106</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.6</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: left;">D21</td>
<td style="text-align: right;">120</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.2</td>
<td style="text-align: right;">122</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D22</td>
<td style="text-align: right;">115</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">57.0</td>
<td style="text-align: right;">130</td>
</tr>
<tr class="even">
<td style="text-align: left;">D23</td>
<td style="text-align: right;">146</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">64.0</td>
<td style="text-align: right;">148</td>
</tr>
<tr class="odd">
<td style="text-align: left;">D24</td>
<td style="text-align: right;">128</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">58.0</td>
<td style="text-align: right;">132</td>
</tr>
<tr class="even">
<td style="text-align: left;">D25</td>
<td style="text-align: right;">217</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">75.7</td>
<td style="text-align: right;">178</td>
</tr>
</tbody>
</table>
<p>Angela says “Darn. The predictions look reasonably close, but they are nowhere near exact. So the model is <em>not perfect</em>. How can we improve it?”</p>
<p>Igor says “Guys, I think I understand this a bit better now. It makes sense that we cannot estimate the exact number of customers just using the temperature and kiosk location. After all, the real world is more complex than that. Many other factors can and do affect the number of customers.”</p>
<p>Dave says “Yes, the other day I was at the beach on a nice warm day and yet I only saw a few people out on the beach. We had an important playoff game in town. So, there you go, that is one thing that affects the number of customers, but which is not in our model.”</p>
<p>Angela then says “So it looks like we cannot improve things for Amanda unless she gives us more data. But can we answer her question of how good the model is? May be it is not <em>exact</em>, but it might still be good enough that she should not be spending money to get more data. I mean the extra benefit might not be worth the cost.”</p>
<p>Suzie has an idea “Let us put some hard numbers on this OK? If we are trying to find out how much variability the model <em>explains</em>, well, how much variability is there to explain in the first place?”</p>
<p>Igor lights up “We are talking about explaining variability in the daily number of customers. Why not just use the variance of that variable?”</p>
<p>Suzie writes code immediately to calculate that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">cust_var =</span> <span class="fu">var</span>(customers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["cust_var"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"1169"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Dave “OK. Where do we go from here?”</p>
<p>Angela “Guys, let us slow don a wee bit here. Can we please go back to the simplest model we had, and start thinking from there? That might help us wrap our heads around this better.”</p>
<p>Igor “OK. In our simplest model, we just predicted the average of the number of customers, completely ignoring the kiosk location or the temperature because at that time we did not have those variables. SO how much variation does that model explain?”</p>
<p>Again Suzie whips out code and produces <a href="#tbl-mean-model-estimates-kiosk-1" class="quarto-xref">Table&nbsp;<span>14.1</span></a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mod_val =</span> <span class="fu">model_values</span>(customers <span class="sc">~</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tbl-mean-model-estimates-kiosk-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mean-model-estimates-kiosk-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;14.1: Model estimates for customers ~ 1, same as the mean model (rounded)
</figcaption>
<div aria-describedby="tbl-mean-model-estimates-kiosk-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: right;">customers</th>
<th style="text-align: left;">kiosk</th>
<th style="text-align: right;">temperature</th>
<th style="text-align: right;">mod_val</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">66.78076</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">58.62733</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">118.66666</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">73.64915</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93.43390</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">62.26931</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">100.36348</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">76.49052</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">130.40991</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">78.21402</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">79.90381</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">51.36669</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">93.75559</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">65.84316</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">124.09655</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">76.77257</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">108.27050</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">66.54305</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">103.27566</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">63.69844</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">124.68300</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">78.70500</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">100.05773</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">63.60002</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">103.27945</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">70.32712</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">95.67201</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">67.17900</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">73.28583</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">53.08774</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">106.21587</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">76.99475</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">81.82622</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">57.38263</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">60.35403</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">51.26179</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">112.81761</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">59.83762</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">130.52786</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">78.63511</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">100.83468</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">76.68618</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">100.07004</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">70.78410</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">96.94184</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">69.21520</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">127.44578</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">79.82809</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">102.03122</td>
<td style="text-align: left;">Mall</td>
<td style="text-align: right;">69.67117</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">168.20985</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">71.25591</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">163.65952</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">66.32198</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">162.31480</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">67.82426</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">129.13389</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">58.67479</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">106.40419</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.41341</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">203.48841</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">78.89073</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">187.48142</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">77.06897</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">153.84239</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">70.72116</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">181.60487</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">73.86402</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">118.03537</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">50.73841</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">145.86710</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">64.33388</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">190.64386</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">72.75379</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">104.94268</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">56.49224</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">135.97914</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">59.54543</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">134.44498</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">56.94877</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">122.31435</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.28400</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">148.15289</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">62.43639</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">138.31947</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">62.41173</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">130.90118</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">61.06536</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">106.01421</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.57334</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">119.50052</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">54.16418</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">115.43508</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">56.99102</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">145.73808</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">63.97887</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="odd">
<td style="text-align: right;">127.90567</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">57.97918</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: right;">217.16607</td>
<td style="text-align: left;">Beach</td>
<td style="text-align: right;">75.73483</td>
<td style="text-align: right;">124</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Igor says “But I thought that if we had only the number of customers and nothing else, then the model estimate is just the average.”</p>
<p>Peter “Yes, when we use customers ~ 1 in the <em>model_values</em> function, that is exactly what it does. The average is 123.8. We can just let <em>model_values</em> do the dirty work for us! The model equation would be” and he wrote down <span class="citation" data-cites="q-kiosk-mean-model-2">@q-kiosk-mean-model-2</span>.</p>
<p><span id="eq-kiosk-mean-model-2"><span class="math display">\[
\widehat{\text{customers}} = 124
\tag{14.1}\]</span></span></p>
<p>Angela “So the model estimates for every row are the same? That actually makes sense because it is just the average no matter what. That means the model values have no variance!”</p>
<p>Dave says “Yes, that makes sense too because this model customers ~ 1 has no explanatory variables and so it has no basis to say anything different for each row. It is unable to take the kiosk location or the temperature to say something specific for each row based on those.”</p>
<p>Angela “So, according to this model, given what it is allowed to use, all the rows should have the same number of customers. It has no clue why they differ. I get it now. It is unable to explain any of the variation in the number of customers!”</p>
<p>Igor “I think Angela hit upon a great insight. The variance of the model estimates actually represents the <em>amount of variation that the model explains</em>! If the model estimates have no variance as in the current situation, then the model explains nothing.”</p>
<p>David “I sure am happy that we managed to get away with giving Angela a model that <em>explained nothing</em> on the first day we met! But then that is all we could do with the data we had!”</p>
<p>“Let me make sure I understand” says Peter. “You are sying that on the one side we have the variance of the outcome variable (number of customers) and on the other side we have the variance of the model estimates, or put differently, the amount of variation the model expects.”</p>
<p>“Yes” Igor responds. Our actual values can vary all over the place, but the model values, as we have built the model, have to fit on a straight line. they atr much more constrained than real-life. SO the variance of the model estimates will always be lower.”</p>
<p>Suzie says “Let us make all this concrete, can we?” and first calculates the variance of the number of customers by itself. That is the amout of variation that a model must try to explain.”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">outcome_var =</span> <span class="fu">var</span>(customers))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["outcome_var"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"1169"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>“OK” Dave says. 1169 is our baseline. A perfect model will explain all of it.”</p>
<p>“But” says Suzie “We are building only linear models and our model estimates will always fall on a straight line. Our points as they stand are scattered and no single straight line can ever catch all of them. Because of this, no model we build can ever hope to explain all of the variance in the number of customers.”</p>
<p>Peter “That’s a sobering thought. Taking it to the next step, why don’t we see how much variability the model with separate means for the two kiosks explains?</p>
<p>Angela writes the following code to build the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_train</span>(customers <span class="sc">~</span> kiosk) <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coef</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)   kioskMall 
      146.2       -44.9 </code></pre>
</div>
</div>
<p>Angela continues “So, the model function is” and writes</p>
<p><span id="eq-kiosk-cat-model-3"><span class="math display">\[
\widehat{\text{num customers}} = 146
\begin{cases}
+0 &amp; \text{if } \text{kiosk} = \text{"Beach"} \\
-45 &amp; \text{if } \text{kiosk} = \text{"Mall"}
\end{cases}
\tag{14.2}\]</span></span></p>
<p>Peter then joins in. “Let us compute the variances. I am not bringing in <em>temperature</em> yet.” He writes this code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mod_est =</span> <span class="fu">model_values</span>(customers <span class="sc">~</span> kiosk)) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">kiosk_model_est_var =</span> <span class="fu">var</span>(mod_est))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["kiosk_model_est_var"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"514"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>“OK” says Angela. “This model explains less than half of the total variance. To be more precise, it explains 514/1169 or 44% of the total variance.”</p>
<p>“Wow!” David says. “Although the model seems to not be great, Angela has condensed the idea of measuring a model’s quality into a single number! Pretty statistical approach if you ask me.”</p>
<p>Igor summarizes. “So we have it. The quality of the model is just the variance of the model estimates divided by the variance of the ourcome variable.” And he writes <a href="#eq-model-quality" class="quarto-xref">Equation&nbsp;<span>14.3</span></a>:</p>
<p><span id="eq-model-quality"><span class="math display">\[
\text{Model quality}
=
\frac{\text{Var}(\text{model estimates})}
     {\text{Var}(\text{outcome})}
\tag{14.3}\]</span></span></p>
<p>Peter cannot wait. “How about the model that includes temperature as well? Does it improve the quality? Let’s check.” and he writes the following code.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_kiosk_mod_est =</span> <span class="fu">model_values</span>(customers <span class="sc">~</span> temperature <span class="sc">+</span> kiosk)) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">temp_kiosk_mod_est_var =</span> <span class="fu">var</span>(temp_kiosk_mod_est))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["temp_kiosk_mod_est_var"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"1005"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Angela exults “Wow! This model explains 1005 out of has a variance of 1169. Does that mean that it explains 1005/1169, or 86% of the variability in customers? What is the model equation for this?””</p>
<p>Igor says “You better believe it! Indeed it does.” He then wrote the code and wrote out the model equation too.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model_train</span>(customers <span class="sc">~</span> temperature <span class="sc">+</span> kiosk) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coef</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept) temperature   kioskMall 
      -18.4         2.6       -56.6 </code></pre>
</div>
</div>
<p>They reconstructed the model equation <a href="#eq-kiosk-mode-no-intxn-2" class="quarto-xref">Equation&nbsp;<span>14.4</span></a> from the output.</p>
<p><span id="eq-kiosk-mode-no-intxn-2"><span class="math display">\[
\widehat{\text{customers}} = -18.4 + 2.6\times \text{temperature} +
\begin{cases}
0 &amp; \text{if } \text{kiosk} = \text{"Beach"} \\
-57 &amp;\text{if } \text{kiosk} = \text{"Mall"}
\end{cases}
\tag{14.4}\]</span></span></p>
<p>David recalled their whole discussion about <em>interaction effects</em> and asked, “Hey Igor or Suzie, by any chance, did Dr.&nbsp;Berlinsky show either of you a way by which we can build a model that includes the fancy <em>interaction effect</em>? We can then try to see how much explanatory quality we can gain by including that.”</p>
<p>“He did show me the code. In fact it requires just changing a single character!” Igor said and wrote it.”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>kiosk_beach_mall_temp <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">temp_kiosk_intxn_mod_est =</span> <span class="fu">model_values</span>(customers <span class="sc">~</span> temperature <span class="sc">*</span> kiosk)) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">temp_kiosk_mod_est_var =</span> <span class="fu">var</span>(temp_kiosk_intxn_mod_est))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["temp_kiosk_mod_est_var"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"1066"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Angela observed “Well, that explains 1066 out of 1169 which is 91%.”</p>
<p>Suzie added “Interpreting the coefficients is complicated, but Dr.&nbsp;B assured me that the net model is exactly the same as the two separate models we gave Amanda.”</p>
<p>Amanda settled for <a href="#eq-kiosk-mode-no-intxn-2" class="quarto-xref">Equation&nbsp;<span>14.4</span></a> as the model that best balances operating efficiency and complexity.</p>
<p>For the moment she decided that the current models were sufficiently good that she need not spend the money to get more data.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../modules/05-explanatory-power-of-models/explain-as-used-in-statistics.html" class="pagination-link" aria-label="*Explain* as used in Statistics">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title"><em>Explain</em> as used in Statistics</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../modules/05-explanatory-power-of-models/accounting-for-variance.html" class="pagination-link" aria-label="The Variance Equation and $R^2$">
        <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">The Variance Equation and <span class="math inline">\(R^2\)</span></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>