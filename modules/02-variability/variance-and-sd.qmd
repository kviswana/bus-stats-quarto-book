# Variance and standard deviation

This chapter discusses the key statistical concept of \textit{variance}.

## Variable

We use the term "variable" to describe a column of a data frame. Why? Let us make things more concrete. A data frame with data on employees of a company might have a column named "salary" to store the salaries of employees. Salaries of employees vary. That is, we know that not everyone in the company has the same salary (generally speaking). So, it makes eminent sense to call a column a "variable."

Similarly, the same data frame might have another column named "Position" that stores the position of each employee. Some example values might be "Manager", "Sales associate", and "IT Specialist." Here too we see "variability" because not all the values in the column are the same. So the term "variable" applies to columns whether they contain numeric or categorical values. However, for the rest of this document, we concern ourselves only with numerical variables.

## Amount of Variation

Measuring the amount of variation plays an important role in statistics. If a column has no variation, then we cannot make much use of the information in the column. When a column does have variation, we often want to know the extent of variation in the values of the column. We want to ascribe a specific number -- that is, *measure* the variation in a column. We call this measure the *variance* of the values in a column. When the numbers in a column are all the same, then we say that the column has no variance -- that is, the variance is zero.

Consider the following three sets of 8 numbers each:\newline\newline Set 1: (1, 2, 2, 1, 2, 1, 2, 1)\newline Set 2: (2, 6, 8, 2, 9, 2, 10, 9)\newline Set 3: (1, 3, 2, 3, 2, 2, 3, 4)\newline\newline Which of the three sets has the highest amount of variation? That is, which set has numbers that differ by the most (among the three sets)?

Can you order the sets in increasing order of their overall variability?

Overall, we can see that the numbers in Set 1 are much closer to each other than those in the other two sets. The numbers in Set 2 are the furthest apart from each other and those in Set 3 are in-between. Therefore the order is: \newline\newline Variance of Set 1 \< Variance of Set 3 \< Variance of Set 2

## Measuring Variation through *variance*

From the foregoing, we see that the variance of a set of numbers is a measure of how much the numbers differ from each other. A set of numbers in which the elements are generally very close together has a low variance and a set that contains numbers that differ from each other by a lot has high variance. Over and above just describing what low and high variance look oike, we would like to assign a specific number to the variance of a set of numbers.

In reality we will compute the variance using the R function \textit{var}. We describe two procedures below just to give you a good feel for what the variance represents.

### Computing Variance: Method 1 -- Using pairwise differences

We first look at an intuitive (but *impractical*) method for computing the variance of a set of numbers. Variance represents how different each member of a set of numbers is from the rest. So the difference between each number and the rest of them plays a central role. Our first approach to computing the variance involves looking at every possible pair of numbers in our set and seing how different the two numbers of the pair are from each other. We then combine all of these pairwise differences into a single number to represent the overall variability inthe set.

#### Steps to compute variance using pairwise differences

Let us assume that we want to compute the variance of the set of 4 num bers (2, 4, 5, 9)

\begin{enumerate}
\item Identify each possible pair of numbers from the set.

(2, 4), (2, 5), (2, 9)\\
(4, 5), (4, 9)\\
(5, 9)\\
We have 6 such pairs.

\item Compute the difference for each pair and square it.


\begin{tabular}{lrr}
\toprule
Pair & Difference & Difference squared \\
\midrule
(2, 4) & 2 & 4 \\
(2, 5) & 3 & 9 \\
(2, 9) & 7 & 49 \\
(4, 5) & 1 & 1 \\
(4, 9) & 5 & 25 \\
(5, 9) & 4 & 16 \\
\bottomrule
\end{tabular}


\item Find the average of the squared differences. \newline
The sum of the squared differences is\newline
Sum = 4 + 9 + 49 + 1 + 25 + 16 = 104\newline
Average = 104/6 = 17.33333

\item Divide the average from the prior step by 2\newline
17.33333/2 = 8.66666\newline\newline
So, the variance of (2, 4, 5, 9) is 8.66667

\end{enumerate}

What are the characteristics of a set of numbers with zero variance? Think a little before reading on.

If the variance has to be zero then. the average of the differences also has to be zero, which means each of the differences has to be zero. That in turn means that all the numbers have to be the same. This makes a lot of sense, because if there is zero or no *variance*, then the numbers do not vary!

### Computing Variance: Method 2 -- Using deviations from the mean

We can also compute the variance using a different aproach -- which also gives the same result as method 1. Most people will use this description of variance. Here, instead of finding the pairwise differences, we see how much each number in our set differs from the average (referred to in statistics as the *mean*). We then combine these individual differences into a number that represents the overall variance in the set.

Again, we use the same set of numbers (2, 4, 5, 9). Let us suppose that these numbers represent the prices of some items in a shop (in the US) and therefore they represent USD amounts.

#### Steps to compute variance using deviations from the mean

\begin{enumerate}
\item Find the average of the numbers\newline\newline
Sum = 2 + 4 + 5 + 9 = 20
Average = 20/4 = 5

\item Find the squared deviations from the mean for each number.\newline\newline
\begin{tabular}{lrr}
\toprule
Number & Difference from mean & Difference squared \\
\midrule
2 & 3 & 9 \\
4 & 1 & 1 \\
5 & 0 & 0 \\
9 & 4 & 16 \\
\bottomrule
\end{tabular}

\item Divide the total of the squared differenbces from the prior step by (n-1) whwre n is the number of elements.\newline\newline
Sum of squared deviations = 9 + 1 + 0 + 16 = 26\newline
Result of dividing by (n-1) = 26/3 = 8.66667

\end{enumerate}

### Unit of measurement for variance

Whenever me measure anything, we measure it in terms of some *unit of measurement*. For example, we might use meter as the *unit of measurement* for people's heights, and USD as the *unit of measurement* for US company profits. In fact, in any data frame, whenever we see a numerical variable, we need to be aware of its *unit of measurement*.

### Computing Variance: Preferred Method -- Using R!

We have a data frame named *variance_example* that has a variable *num* with the values (2, 4, 5, 9). We can use the following R code to compute its variance.

```{r}
variance_example |> 
  summarize(num_var = var(num))
```

Here is another example using the *mpg* data frame to compute the variance of one of its variables.

```{r}
mpg |>
  summarize(hwy_var = var(hwy))
```

In the previous section we computed the variance of a set of numbers that represented USD values. What are the units for variance?

In the two methods where we computed the variance, we found some differences in each step. These differences were differences between USD amounts and hence the differences have units of USD. We then squared the differences. The unit of measurement for the squares wiuld be USD-squared. We then averaged these in one approach and divided by a number in the other approach to get the variance. Therefore, variance also has USD-squared as its *unit of measurement*.

In general, when we compute the variance of a variable measured in some units (say, u, the variance has u-squared as its unit of measurement. That is, if we have a variable expressed in meters, then the variance of the variable will be in meters-squared.

We generally have a clear mental notion of units like USD and meters, but not units like USD-sauared or meters-squared.

## Another measure of spread: *Standard Deviation*

We have een that *variance* has squared units and we cannot easily relate to these. Statisticians have therefore given us another measure of variability that has the same units as the original variable. This is the *standard deviation* and we compute it as the square-root of the variance.

If a variable is measured in inches, its variance has inches-squared as its unit. However, when we compute its square root, we get the *standard deviation* with inches as units.

We can now mentally relate the original variable values to the *standard deviation* and therefore statisticians use this measure vey widely. This is not to say that variance is not widely used as well. It is, and we will use it extensively in this course as well.

### Computing *standard deviation* using R

We can use the *sd* function inside the *sumamrize* function to compute the *standard deviation*

Let us comnpute the *standard deviation* of the city mileage (variable *cty*) in the *mpg* data frame.

```{r}
mpg |>
  summarize(cty_sd = sd(cty))
```


Just to confirm that the computed *standard deviation* is in fact the square root of the *variance* let us compute both.

```{r}
mpg |>
  summarize(cty_var = var(cty), cty_sd = sd(cty))
```