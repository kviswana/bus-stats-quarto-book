{
  "hash": "14bfd68fa1f33fb90d8a8e5ce6d26f3b",
  "result": {
    "engine": "knitr",
    "markdown": "# Category Means {#sec-category-means}\n\nAngela, Steve, Dave, Igor, and Suzie -- our interns from the previous chapter, sat around the table in the conference room waiting for Amanda and discussed the previous night's exciting professional basketball game.\n\nLast chapter, the interns learned an important lesson: when you must commit to **one number** without any further information, and you measure mistakes more harshly the bigger they are (by using a squared penalty), the best long-run choice is the average.\n\nAmanda walked in exactly at 9 am. WIth a bright smile, she said \"Team, I have some good news. First off, we did very well last month. We had far fewer days of bad mismatches from our staffing levels with the customer counts. Your model improved significantly on what we were doing earlier.\n\nSecondly, I have better data this time and I am hoping we can improve our decision further.\"\n\n\n## Staffing kiosks at malls and beaches\n\n\"I have better data this time\" Amanda says, pulling up a spreadsheet on her laptop. “The same two kiosks. Same city. Same staffing problem. But ...”\n\nShe points to the new column.\n\n“This time, the person collecting data included the kiosk.”\n\nThe interns lean in. The data now tells them *where* each customer count came from: *Mall* or *Beach*.\n\nThe key difference from the previous chapter is that the decision no longer has to be the same everywhere. Instead, the company can make one decision for the Mall kiosk and a different decision for the Beach kiosk, using the information it has about location. Amanda hoped that this can lead to an even better match between the staffing and the actual customer numbers.\n\nHere is the data:\n\n| customers | kiosk |\n|----------:|:------|\n|        89 | Mall  |\n|        95 | Mall  |\n|       131 | Mall  |\n|       101 | Mall  |\n|       103 | Mall  |\n|       134 | Mall  |\n|       109 | Mall  |\n|        75 | Mall  |\n|        86 | Mall  |\n|        91 | Mall  |\n|       177 | Beach |\n|       151 | Beach |\n|       152 | Beach |\n|       143 | Beach |\n|       123 | Beach |\n|       194 | Beach |\n|       155 | Beach |\n|        81 | Beach |\n|       161 | Beach |\n|       126 | Beach |\n\nAmanda taps the screen.\n\n“Last month I asked for, and you gave me, *one* figure for the number of customers for both kiosks” she says. “Now we have more information and want to do better. Can you use this extra information?”\n\nIn this scenario, we need to decide a customer level to use for determining staff level -- but separately for each kiosk.\n\n-   If we are given only the data in column 1 (the *customers* counts), then based on the previous chapter, our best choice is the overall average.\n\n-   If we are given the entire table, then we have additional information and can possibly determine a different number for each kiosk. \n\nInitially it seems to many of the interns that the new information really does not add any value.  David says, \"Why not just adopt the overall average again like last month? I mean how is this kiosk information helping us?\"\n\nAngela says \"Let us consider an extreme scenario. What if the sales at the Beach kiosk is generally twice that of the sales in the Mall kiosk. In that case, predicting the same number for both does not seem right. Surely we will not have the same staffing level for both. So differentiating the two should make sense.\"\n\n\"I agree\" Suzie says. \"We should first look at the data. Even if the difference in sales is not as dramatic as Angela mentioned, it might still make sense to differentiate. I have computed the averages for the two kiosks. Here they are.\" Suzie then shows @tbl-kiosk-avg-sales.\n\n\n|kiosk | avg_customers|\n|:-----|-------------:|\n|Mall  |           101|\n|Beach |           146|\n\n: Average sales at the two kiosks {#tbl-kiosk-avg-sales}\n\nDavid: \"I see your point. These sales do seem quite different with the beach kiosk getting 40% more customers per day on average. Perhaps a different model value does make sense after all. What should the value be though for each kiosk?\"\n\nAgain, Igor speaks last, a little less timid than he was the last time around. \"If we treat the data separately for each kiosk then we really have two problems that are identical to our problem from last month.\"\n\nPeter: \"Then should we just say the model value for each kiosk's is its own average sales?\"\n\nThe rest nods in agreement. They cannot see any flaw in this.\n\nPeter: \"For the *Mall* kiosk, we can use the average of the *customers* column for only the *Mall* rows, and similarly for the *Beach* kiosk.\"\n\nAngela: \"Can we verify this with a chart like we did the last time? Except that we will have one chart per kiosk.\"\n\nSuzie: \"Since the computer is going to do all the work, we can also compare the average penalty per trial for the two kiosks and compare that with using the overall average.\"\"\n\nSuzie's plots for the average penalty for different guesses for each of the kiosks appear in @fig-kiosk-beach-plots.\n\n![Plots of guess against average penalty for the two kiosks: As expected, choosing the average (101 for mall, and 146 for beach) generates the lowest average penalty](../../images/fig-kiosk-beach-plots.png){#fig-kiosk-beach-plots width=70% fig-align=center}\n\nDave says \"As we expected, the best decisions for the two kiosks is still the average, but computed separately for each kiosk. In the plot for the beach kiosk, the lowest average penalty occurs at its average of 146 and at 101 for the mall kiosk.\" \n\nSuzie also reported the average penalties if we used the overall average of number of customers and if we used the specific averages for each kiosk.\n\n- Average penalty per choice if we use the overall average number of customers: 1114\n- Average penalty per choice if we use kiosk-specific average for Mall: 325\n- Average penalty per choice if we use kiosk-specific average for Beach: 880\n\nWe can see that the penalty is far lower if we use the kiosk-specific averages rather than one overall average. Why is the average penalty so much higher for the beach kiosk than the mall kiosk? Let us see the variability in the data for these two kiosks. See @fig-kiosk-violin-mall-beach.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkiosk_mall_beach |> \n  point_plot(customers ~ kiosk, annot = \"violin\")\n```\n:::\n\n\n![Comparison of the distributions of the customer traffic for the two kiosks: Beach has a lot more variability](../../images/fig-kiosk-violin-mall-beach.png){#fig-kiosk-violin-mall-beach width=70% fig-align=center}\n\nSince the beach kiosk has a lot more variability than the mall kiosk, the penalty is much more as choosing the average as the decision will be off from the actual value by quite a bit on many days.\n\nThe interns present their findings to Amanda.\n\nAmanda studies the plots and the reduction in average penalties and says \"This is good. It looks like having more information surely helps us to make better decisions.\"\n\n“She continues, “the lesson is not ‘always use the mean. but ’ use the best mean you’re allowed to use, given the information you have.”\n\n\n",
    "supporting": [
      "category-means-story_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}